(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42e74b8b"],{2013:function(e,t,o){"use strict";var n=o("71b7"),i=o.n(n);i.a},2909:function(e,t,o){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function i(e){if(Array.isArray(e))return n(e)}o.d(t,"a",(function(){return c}));o("a4d3"),o("e01a"),o("d28b"),o("a630"),o("d3b7"),o("3ca3"),o("ddb0");function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}o("fb6a"),o("b0c0"),o("25f0");function a(e,t){if(e){if("string"===typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||r(e)||a(e)||s()}},4023:function(e,t,o){"use strict";var n=o("5d52"),i=o.n(n);i.a},"4ec9":function(e,t,o){"use strict";var n=o("6d61"),i=o("6566");e.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},5518:function(e,t,o){"use strict";var n=o("e03e"),i=o.n(n);i.a},"59a1":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Card",{attrs:{"dis-hover":""}},[o("p",{attrs:{slot:"title"},slot:"title"},[e._v("Problem")]),o("Table",{staticClass:"content-table",attrs:{loading:e.tableLoading,columns:e.problemColumns,data:e.problems,"no-data-text":""},on:{"on-sort-change":e.onSort},scopedSlots:e._u([{key:"code",fn:function(t){var n=t.row;return[n.problemCode.length>20?o("Tooltip",{attrs:{"max-width":"180"}},[o("span",{staticStyle:{"white-space":"normal","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[o("ProblemCode",{attrs:{problemCode:n.problemCode}})],1),o("span",[e._v(e._s(n.problemCode.substring(0,20)+"..."))])]):o("ProblemCode",{attrs:{problemCode:n.problemCode}})]}},{key:"title",fn:function(t){var n=t.row;return[o("span",[e._v(e._s(n.problemTitle))]),0===n.isPublic?o("Tag",{staticStyle:{"margin-left":"5px"},attrs:{color:"volcano"}},[e._v("Private")]):e._e()]}},{key:"ratio",fn:function(t){var n=t.row;return[o("span",[e._v(e._s(n.acceptNum+" / "+n.submitNum))])]}},{key:"time",fn:function(t){var n=t.row;return[o("span",{staticClass:"time"},[e._v(e._s(n.timeLimit||0))])]}},{key:"mem",fn:function(t){var n=t.row;return[o("span",{staticClass:"mem"},[e._v(e._s(n.memoryLimit||0))])]}},{key:"tag",fn:function(t){var n=t.row;return[o("div",{staticClass:"tags"},e._l(n.tagDTOList,(function(t){return o("Tag",{key:t.id},[e._v(e._s(t.title))])})),1)]}},{key:"edit",fn:function(t){var n=t.row;return[o("span",{staticClass:"clickable",on:{click:function(t){return e.onEditProblem(n,!1)}}},[e._v("Edit")]),o("Divider",{attrs:{type:"vertical"}}),o("span",{staticClass:"clickable",on:{click:function(t){return e.onEditProblem(n,!0)}}},[e._v("Fork")]),o("Divider",{attrs:{type:"vertical"}}),o("span",{staticClass:"clickable",on:{click:function(t){return e.showProblemDescriptions(n)}}},[e._v("Description")]),o("Divider",{attrs:{type:"vertical"}}),o("span",{staticClass:"clickable",on:{click:function(t){return e.showProblemCheckpoints(n)}}},[e._v("Checkpoints")])]}}])})],1),o("div",{staticClass:"footer-tools"},[o("Button",{staticClass:"float-left footer-btn",attrs:{type:"default",size:"small"},on:{click:e.addProblem}},[e._v("Add")]),o("Button",{staticClass:"float-left footer-btn",attrs:{type:"default",size:"small"},on:{click:e.tagsManagement}},[e._v("Tags")]),o("Page",{staticClass:"float-right",attrs:{size:"small","show-elevator":"","show-sizer":"",total:e.total,current:e.pageNow,"page-size":e.pageSize,"page-size-opts":e.pageSizeOpts},on:{"update:current":function(t){e.pageNow=t},"on-change":e.onPageChange,"on-page-size-change":e.onPageSizeChange}})],1),o("Modal",{attrs:{width:"60%","mask-closable":!1,loading:e.formModalLoading},on:{"on-ok":e.handleUpdateProblem},model:{value:e.formModal,callback:function(t){e.formModal=t},expression:"formModal"}},[o("template",{slot:"header"},[e.isAddProblem?o("div",{staticClass:"ivu-modal-header-inner"},[e._v("Add Problem")]):o("ProblemCode",{attrs:{problemCode:e.problemCode}})],1),o("ProblemForm",{ref:"ProblemForm"})],2),o("Modal",{attrs:{width:"80%","footer-hide":""},model:{value:e.descriptionModel,callback:function(t){e.descriptionModel=t},expression:"descriptionModel"}},[o("template",{slot:"header"},[o("ProblemCode",{attrs:{problemCode:e.problemCode}}),o("span",[e._v(e._s(e.problemTitle))])],1),o("ProblemDescription",{ref:"ProblemDescription"})],2),o("Modal",{attrs:{width:"80%","ok-text":"Save","mask-closable":!1,loading:e.uploadModalLoading},on:{"on-ok":e.saveCheckpoints},model:{value:e.checkpointModel,callback:function(t){e.checkpointModel=t},expression:"checkpointModel"}},[o("template",{slot:"header"},[o("ProblemCode",{attrs:{problemCode:e.problemCode}}),o("span",[e._v(e._s(e.problemTitle))])],1),o("ProblemCheckpoint",{ref:"ProblemCheckpoint"})],2)],1)},i=[],r=(o("d3b7"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",[o("strong",[e._v(e._s(e.oj))]),e._v("-"+e._s(e.code)+" ")])}),a=[],s=(o("ac1f"),o("1276"),{name:"ProblemCode",props:{problemCode:{type:String,default:"-"}},computed:{oj:function(){return this.problemCode.split("-")[0]},code:function(){return this.problemCode.split("-")[1]}}}),c=s,l=o("2877"),u=Object(l["a"])(c,r,a,!1,null,"480e8f1c",null),d=u.exports,p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"checkpointtable"},[o("span",[e._v("Case Checkpoints")]),o("Table",{staticClass:"list_div",attrs:{stripe:"",columns:e.caseColumns,data:e.caseCheckpoints,"max-height":600,loading:e.loading},scopedSlots:e._u([{key:"actions",fn:function(t){var n=t.row;return[o("Tag",[e._v(e._s("Case "+(n.caseIndex+1)))]),o("Divider",{attrs:{type:"vertical"}}),o("Tooltip",{attrs:{content:"Cancel",placement:"right"}},[o("span",{staticClass:"hover",on:{click:function(t){return e.setCaseCheckpoint(n.checkpointId,!1)}}},[o("Icon",{attrs:{type:"md-remove",color:"#19be6b"}})],1)])]}},{key:"move",fn:function(t){var n=t.index;return[o("span",{staticClass:"hover",on:{click:function(t){return e.caseMove(n,1)}}},[o("Icon",{attrs:{type:"md-arrow-down"}})],1),o("span",{staticClass:"hover",staticStyle:{margin:"0 5px"},on:{click:function(t){return e.caseMove(n,-1)}}},[o("Icon",{attrs:{type:"md-arrow-up"}})],1)]}}])})],1),o("div",{staticClass:"checkpointtable"},[o("span",[e._v("Total Checkpoints")]),o("Table",{staticClass:"list_div",attrs:{stripe:"",columns:e.totalColumns,data:e.totalCheckpoints,"max-height":1e3,loading:e.loading},on:{"on-cell-click":e.onPreview,"on-selection-change":e.onTableSelect},scopedSlots:e._u([{key:"checkpointId",fn:function(t){var n=t.row;return[o("span",{staticClass:"hover",staticStyle:{"margin-right":"10px"}},[e._v(e._s(n.checkpointId))])]}},{key:"score",fn:function(t){var n=t.index;return[o("Input",{staticStyle:{width:"100px"},model:{value:e.totalCheckpoints[n].checkpointScore,callback:function(t){e.$set(e.totalCheckpoints[n],"checkpointScore",e._n(t))},expression:"totalCheckpoints[index].checkpointScore"}})]}},{key:"actions",fn:function(t){var n=t.row;return[o("span",{staticClass:"hover",on:{click:function(t){return e.onDownload([n])}}},[o("Icon",{attrs:{type:"md-download",color:"#2d8cf0"}})],1),o("Divider",{attrs:{type:"vertical"}}),o("Poptip",{attrs:{transfer:"",confirm:"",title:"Delete "+n.checkpointId+" ?"},on:{"on-ok":function(t){return e.onDeleteCheckpoints([n])}}},[o("span",{staticClass:"hover"},[o("Icon",{attrs:{type:"md-trash",color:"#ed4014"}})],1)]),o("Divider",{attrs:{type:"vertical"}}),e.isCase(n)?o("Tag",[e._v(e._s("Case "+(n.caseIndex+1)))]):[n.inputSize<1024&&n.outputSize<1024?o("Tooltip",{attrs:{content:"Set Case",placement:"right"}},[o("span",{staticClass:"hover",on:{click:function(t){return e.setCaseCheckpoint(n.checkpointId,!0)}}},[o("Icon",{attrs:{type:"md-add",color:"#19be6b"}})],1)]):o("Tooltip",{attrs:{content:"Too large",placement:"right"}},[o("span",[o("Icon",{attrs:{type:"md-add",disabled:"",color:"#c5c8ce"}})],1)])]]}},{key:"move",fn:function(t){var n=t.index;return[o("span",{staticClass:"hover",on:{click:function(t){return e.move(n,1)}}},[o("Icon",{attrs:{type:"md-arrow-down"}})],1),o("span",{staticClass:"hover",staticStyle:{margin:"0 5px"},on:{click:function(t){return e.move(n,-1)}}},[o("Icon",{attrs:{type:"md-arrow-up"}})],1)]}}])}),o("div",{staticClass:"clearfix",staticStyle:{"margin-top":"10px"}},[o("div",{staticStyle:{float:"left"}},[o("ButtonGroup",[o("Button",{attrs:{type:"primary",loading:e.downloadLoading},on:{click:function(t){return e.onDownload(e.selectedCheckpoints)}}},[e._v(" Batch download ")]),o("Button",{attrs:{type:"error"},on:{click:function(t){return e.onDeleteCheckpoints(e.selectedCheckpoints)}}},[e._v(" Batch delete ")]),o("Button",{on:{click:e.openUploadModal}},[e._v(" Uploads ")])],1)],1),o("div",{staticStyle:{float:"right"}},[o("div",{staticClass:"clearfix"},[o("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.setScores(e.$refs.totalScore.currentValue)}}},[e._v("Average")]),o("Input",{ref:"totalScore",staticStyle:{width:"100px","margin-right":"10px",float:"right"},attrs:{value:100},on:{"on-enter":function(t){return e.setScores(e.$refs.totalScore.currentValue)}}})],1),o("div",{staticStyle:{color:"#ccc"}},[e._v("You can set average score for each checkpoint")])])])],1),o("Modal",{attrs:{title:"Checkpoint Upload",width:"30%",loading:e.uploadModalLoading,"mask-closable":!1},on:{"on-ok":e.onCheckpointUpload},model:{value:e.uploadModal,callback:function(t){e.uploadModal=t},expression:"uploadModal"}},[o("CheckpointsUpload",{ref:"CheckpointsUpload"})],1),o("Modal",{attrs:{title:"Checkpoint Preview",width:"30%",loading:e.previewModalLoading},on:{"on-ok":e.onCheckpointUpdate},model:{value:e.previewModal,callback:function(t){e.previewModal=t},expression:"previewModal"}},[o("CheckpointPreview",{ref:"CheckpointPreview"})],1)],1)},m=[],f=(o("99af"),o("4de4"),o("4160"),o("caad"),o("d81d"),o("a434"),o("2532"),o("159b"),o("2909")),h=o("5530"),b=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"clearfix"},[o("div",[o("span",{staticClass:"subtitle"},[e._v("Newline")]),o("div",{staticClass:"float-right"},[o("Dropdown",{attrs:{transfer:""},on:{"on-click":e.onChangeConvertMode}},[o("a",{attrs:{href:"javascript:void(0)"}},[e._v(" "+e._s(e.NEWLINE_CONVERT[e.convertMode].description)+" "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.NEWLINE_CONVERT,(function(t){return o("DropdownItem",{key:t.name,attrs:{name:t.name}},[e._v(e._s(t.description))])})),1)],1)],1)]),o("div",[o("span",{staticClass:"subtitle"},[e._v("Single Upload")]),o("div",{staticClass:"float-right"},[o("Button",{attrs:{size:"small",type:"text"},on:{click:e.reset}},[e._v("Clear All")])],1),o("Form",{attrs:{model:e.singleCheckpoint}},[o("FormItem",{attrs:{label:"Standard Input"}},[o("Input",{attrs:{autocomplete:"off",type:"textarea",rows:5},model:{value:e.singleCheckpoint.input,callback:function(t){e.$set(e.singleCheckpoint,"input",t)},expression:"singleCheckpoint.input"}})],1),o("FormItem",{attrs:{label:"Standard Output"}},[o("Input",{attrs:{autocomplete:"off",type:"textarea",rows:5},model:{value:e.singleCheckpoint.output,callback:function(t){e.$set(e.singleCheckpoint,"output",t)},expression:"singleCheckpoint.output"}})],1)],1)],1),o("div",[o("span",{staticClass:"subtitle"},[e._v("Batch Upload")]),o("Upload",{ref:"upload",attrs:{multiple:"",paste:"",type:"drag",accept:".in, .out",format:["in","out"],"max-size":102400,"file-list":e.fileList},on:{"update:fileList":function(t){e.fileList=t},"update:file-list":function(t){e.fileList=t}}},[o("div",{staticStyle:{padding:"20px 0"}},[o("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),o("p",[e._v("Click or drag files here to upload")]),o("p",[e._v("Only .in and .out files are supported")]),o("p",[e._v("Each pair of checkpoints' filenames should match")])],1)])],1)])},v=[],g=(o("fb6a"),o("b0c0"),o("4ec9"),o("8a79"),o("3ca3"),o("ddb0"),o("7c15")),k=o("36fa"),C=o("c9d9"),y={name:"CheckpointsUpload",components:{Upload:k["a"]},data:function(){return{singleCheckpoint:{input:"",output:""},fileList:[],convertMode:C["j"].DOS2UNIX,onUploading:!1}},computed:{NEWLINE_CONVERT:function(){return C["i"]}},methods:{reset:function(){this.singleCheckpoint.input="",this.singleCheckpoint.output="",this.convertMode=C["j"].DOS2UNIX,this.clearFiles()},clearFiles:function(){this.fileList=[],this.$refs.upload.clearFiles()},validFile:function(){var e=this;if(0===this.fileList.length)return this.$Message.warning("Select files"),!1;for(var t=0,o=new Map,n=0;n<this.fileList.length;++n){var i=this.fileList[n].file,r=i.name;if(r.endsWith(".in"))r=r.slice(0,-3);else{if(!r.endsWith(".out"))return this.$Message.error("invalid: "+r),!1;r=r.slice(0,-4)}t+=i.size,o.set(r,!o.has(r))}var a=[];return o.forEach((function(e,t){e&&a.push(t)})),a.length>0?(a.slice(0,Math.min(5,a.length)).forEach((function(t){return e.$Message.error("file "+t+" does not match")})),!1):!(t>209715200)||(this.$Message.error("Too large: "+t/1024+"KB"),!1)},onChangeConvertMode:function(e){this.convertMode=e},handleBatchSubmit:function(e,t){var o=this;if(!this.validFile())return t(),!1;var n=new FormData;this.fileList.forEach((function(e){return n.append("files",e.file)})),n.append("mode",this.convertMode);var i=this.$Message.loading({content:"Uploading ".concat(this.fileList.length," files"),duration:0});g["a"].uploadCheckpointFiles(n).then((function(t){e(t),o.$Message.success("Upload successfully"),o.reset()})).catch((function(e){o.$Message.error(e)})).finally((function(){i(),t()}))},handleSingleSubmit:function(e,t){var o=this,n=this.$Message.loading({content:"Uploading",duration:0});g["a"].uploadSingleCheckpoint(Object(h["a"])(Object(h["a"])({},this.singleCheckpoint),{},{mode:this.convertMode})).then((function(t){o.$Message.success("Upload successfully: ".concat(t.checkpointId)),e([t]),o.reset()})).catch((function(e){o.$Message.error(e)})).finally((function(){n(),t()}))},save:function(e,t){""!==this.singleCheckpoint.input||""!==this.singleCheckpoint.output?this.handleSingleSubmit(e,t):this.handleBatchSubmit(e,t)}}},T=y,w=(o("dcbf"),Object(l["a"])(T,b,v,!1,null,"6153dca1",null)),M=w.exports,_=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",[o("span",{staticClass:"subtitle"},[e._v("Newline")]),o("div",{staticClass:"float-right"},[o("Dropdown",{attrs:{transfer:""},on:{"on-click":e.onChangeConvertMode}},[o("a",{attrs:{href:"javascript:void(0)"}},[e._v(" "+e._s(e.NEWLINE_CONVERT[e.convertMode].description)+" "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.NEWLINE_CONVERT,(function(t){return o("DropdownItem",{key:t.name,attrs:{name:t.name}},[e._v(e._s(t.description))])})),1)],1)],1)]),o("Form",{attrs:{model:e.checkpoint}},[o("FormItem",{attrs:{label:"Standard Input"}},[o("Input",{attrs:{type:"textarea",autocomplete:"off",rows:10},model:{value:e.checkpoint.input,callback:function(t){e.$set(e.checkpoint,"input",t)},expression:"checkpoint.input"}})],1),o("FormItem",{attrs:{label:"Standard Output"}},[o("Input",{attrs:{type:"textarea",autocomplete:"off",rows:10},model:{value:e.checkpoint.output,callback:function(t){e.$set(e.checkpoint,"output",t)},expression:"checkpoint.output"}})],1)],1)],1)},I=[],S={name:"CheckpointPreview",data:function(){return{onUploading:!1,checkpoint:{},oldCheckpoint:{},convertMode:C["j"].DOS2UNIX}},computed:{NEWLINE_CONVERT:function(){return C["i"]}},methods:{onChangeConvertMode:function(e){this.convertMode=e},reset:function(){this.convertMode=C["j"].DOS2UNIX},set:function(e){this.checkpoint=e,this.oldCheckpoint=Object(h["a"])({},e)},save:function(e,t){var o=this;this.checkpoint.input!==this.oldCheckpoint.input||this.checkpoint.output!==this.oldCheckpoint.output?(this.onUploading=!0,g["a"].uploadSingleCheckpoint({input:this.checkpoint.input,output:this.checkpoint.output,mode:this.convertMode}).then((function(t){e(o.checkpoint.checkpointId,t),o.$Message.success("Success")})).catch((function(e){o.$Message.error(e)})).finally((function(){o.onUploading=!1,t()}))):t()}}},P=S,E=(o("4023"),Object(l["a"])(P,_,I,!1,null,"201dcffd",null)),D=E.exports,L={name:"CheckpointList",components:{CheckpointsUpload:M,CheckpointPreview:D},data:function(){var e=this;return{totalColumns:[{type:"selection",width:53},{key:"checkpointId",slot:"checkpointId",minWidth:150},{title:"Input Preview",key:"inputPreview",className:"hover",tooltip:!0},{title:"Output Preview",key:"outputPreview",className:"hover",tooltip:!0},{title:"Input file",render:function(e,t){return e("span",t.row.inputFilename||"")}},{title:"Output file",render:function(e,t){return e("span",t.row.outputFilename||"")}},{title:"Upload Time",key:"gmtCreate",width:200,render:function(e,t){return e("Time",{props:{time:parseInt(t.row.gmtCreate),type:"datetime"}})}},{title:"Score",width:150,slot:"score",renderHeader:function(t){var o=0;return e.totalCheckpoints.forEach((function(e){return o+=e.checkpointScore||0})),t("span","Score (".concat(o,")"))}},{title:"Actions",slot:"actions",width:200},{slot:"move",title:" ",width:80}],caseColumns:[{key:"checkpointId"},{title:"Input Preview",key:"inputPreview",tooltip:!0},{title:"Output Preview",key:"outputPreview",tooltip:!0},{title:"Input file",render:function(e,t){return e("span",null===t.row.inputFilename?"":t.row.inputFilename)}},{title:"Output file",render:function(e,t){return e("span",null===t.row.outputFilename?"":t.row.outputFilename)}},{title:"Upload Time",key:"gmtCreate",width:200,render:function(e,t){return e("Time",{props:{time:parseInt(t.row.gmtCreate),type:"datetime"}})}},{title:"Actions",slot:"actions",width:200},{slot:"move",title:" ",width:80}],uploadModal:!1,previewModal:!1,loading:!1,downloadLoading:!1,previewModalLoading:!0,uploadModalLoading:!0,totalCheckpoints:[],selectedCheckpoints:[],checkpointQuery:{},problemCode:""}},computed:{caseCheckpoints:function(){var e=this,t=this.totalCheckpoints.filter((function(t){return e.isCase(t)}));t.sort((function(e,t){return e.caseIndex-t.caseIndex}));for(var o=0;o<t.length;++o)t[o].caseIndex=o;return t}},methods:{isCase:function(e){return null!==e.caseIndex&&void 0!==e.caseIndex},setCaseCheckpoint:function(e,t){for(var o=0;o<this.totalCheckpoints.length;++o)if(this.totalCheckpoints[o].checkpointId===e)return void this.$set(this.totalCheckpoints[o],"caseIndex",t?this.caseCheckpoints.length:null)},move:function(e,t){if((0!==e||-1!==t)&&(e!==this.totalCheckpoints.length-1||1!==t)){var o=Object(h["a"])({},this.totalCheckpoints[e]);this.$set(this.totalCheckpoints,e,this.totalCheckpoints[e+t]),this.$set(this.totalCheckpoints,e+t,o)}},caseMove:function(e,t){var o=this;if((0!==e||-1!==t)&&(e!==this.caseCheckpoints.length-1||1!==t)){var n=[];this.totalCheckpoints.forEach((function(e,t){o.isCase(e)&&n.push(Object(h["a"])(Object(h["a"])({},e),{},{index:t}))})),n.sort((function(e,t){return e.caseIndex-t.caseIndex})),n=n.map((function(e){return e.index}));var i=this.totalCheckpoints[n[e]].caseIndex;this.$set(this.totalCheckpoints[n[e]],"caseIndex",this.totalCheckpoints[n[e+t]].caseIndex),this.$set(this.totalCheckpoints[n[e+t]],"caseIndex",i)}},onTableSelect:function(e){this.selectedCheckpoints=e},onDeleteCheckpoints:function(e){for(var t=e.map((function(e){return e.checkpointId})),o=this.totalCheckpoints.length,n=o-1;n>=0;--n)t.includes(this.totalCheckpoints[n].checkpointId)&&this.totalCheckpoints.splice(n,1)},onCheckpointUpload:function(){var e=this;this.$refs.CheckpointsUpload.save((function(t){e.totalCheckpoints=e.totalCheckpoints.concat(t),e.uploadModal=!1}),(function(){e.uploadModalLoading=!1,e.$nextTick((function(){e.uploadModalLoading=!0}))}))},onDownload:function(e){var t=this;if(0!==e.length){var o=[];e.forEach((function(e){o.push({id:e.inputFileId,downloadFilename:"".concat(e.checkpointId,".in")}),o.push({id:e.outputFileId,downloadFilename:"".concat(e.checkpointId,".out")})})),this.downloadLoading=!0,g["a"].zipDownload(o).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.downloadLoading=!1}))}},onCheckpointUpdate:function(){var e=this;this.$refs.CheckpointPreview.save((function(t,o){for(var n=0;n<e.totalCheckpoints.length;++n)if(e.totalCheckpoints[n].checkpointId===t)return o.checkpointScore=e.totalCheckpoints[n].checkpointScore,o.caseIndex=e.totalCheckpoints[n].caseIndex,e.totalCheckpoints.splice(n,1,o),void(e.previewModal=!1);throw new Error("No such checkpoint: "+t)}),(function(){e.previewModalLoading=!1,e.$nextTick((function(){e.previewModalLoading=!0}))}))},openUploadModal:function(){this.$refs.CheckpointsUpload.reset(),this.uploadModal=!0},openPreviewModal:function(){this.$refs.CheckpointPreview.reset(),this.previewModal=!0},onPreview:function(e,t){var o=this;if(["checkpointId","inputPreview","outputPreview"].includes(t.key)){var n=e.checkpointId;g["a"].getCheckpointPreview(n).then((function(e){o.$refs.CheckpointPreview.set(e),o.openPreviewModal()})).catch((function(e){o.$Message.error(e.message)}))}},setScores:function(e){e=parseInt(e);for(var t=parseInt(parseInt(e)/this.totalCheckpoints.length),o=0;o<this.totalCheckpoints.length;++o)this.$set(this.totalCheckpoints[o],"checkpointScore",t),e-=t;for(var n=this.totalCheckpoints.length-1;n>=0&&e>0;--n)this.$set(this.totalCheckpoints[n],"checkpointScore",this.totalCheckpoints[n].checkpointScore+1),e--},query:function(e){var t=this;return new Promise((function(o,n){t.problemCode=e,t.loading=!0,g["a"].getCheckpointList(e).then((function(e){t.totalCheckpoints=Object(f["a"])(e),o()})).catch(n).finally((function(){t.loading=!1}))}))},save:function(e,t,o){var n=this,i=this.totalCheckpoints.map((function(e){return{checkpointId:e.checkpointId,checkpointScore:e.checkpointScore}})),r=!0;i.forEach((function(e,t){void 0!==e.checkpointScore&&null!==e.checkpointScore||(n.$Message.error("Set score for checkpoint #".concat(t)),r=!1)})),!0===r?g["a"].updateProblemCheckpoints({problemCode:this.problemCode,checkpointCases:this.caseCheckpoints.map((function(e){return e.checkpointId})),checkpoints:i}).then((function(t){n.$Message.success("Updated"),e&&e()}),t).finally(o):t&&t()}}},x=L,$=(o("cd6c"),Object(l["a"])(x,p,m,!1,null,"04b997c7",null)),j=$.exports,O=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"clearfix"},[o("Table",{attrs:{"disabled-hover":"",columns:e.descriptionColumns,data:e.descriptions},scopedSlots:e._u([{key:"title",fn:function(t){var n=t.row;return[n.isSelected?o("Input",{directives:[{name:"focus",rawName:"v-focus"}],ref:"titleInput",on:{"on-focus":function(e){n.oldTitle=n.title},"on-blur":function(t){return e.updateDescriptionTitle(n)}},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;n.isSelected=!n.isSelected}},model:{value:n.title,callback:function(t){e.$set(n,"title",t)},expression:"row.title"}}):o("span",{staticClass:"editable",on:{click:function(e){n.isSelected=!n.isSelected}}},[e._v(e._s(n.title))])]}},{key:"public",fn:function(t){var n=t.row;return[o("i-switch",{attrs:{"true-value":1,"false-value":0,"before-change":e.updateDescriptionVisibility},nativeOn:{mousedown:function(t){return e.onMousedown(n.id,n.isPublic)}},model:{value:n.isPublic,callback:function(t){e.$set(n,"isPublic",t)},expression:"row.isPublic"}})]}},{key:"default",fn:function(t){var n=t.row;return[o("i-switch",{attrs:{"true-color":"#19be6b",value:n.id===e.problem.defaultDescriptionId,"before-change":e.updateDefaultDescription},nativeOn:{mousedown:function(t){return e.onMousedown(n.id)}}})]}},{key:"edit",fn:function(t){var n=t.row;return[o("span",{staticClass:"clickable",on:{click:function(t){return e.onEditDescription(n)}}},[e._v("Edit")]),o("Divider",{attrs:{type:"vertical"}}),o("span",{staticClass:"clickable",on:{click:function(t){return e.onDeleteDescription(n)}}},[e._v("Delete")])]}}])}),o("div",{staticClass:"footer-tools"},[o("Button",{staticClass:"float-right footer-btn",attrs:{type:"primary",size:"small",loading:e.addLoading},on:{click:e.onAddDescription}},[e._v("Add")])],1),o("Modal",{attrs:{width:"80%","mask-closable":!1,loading:e.modalLoading,title:e.curDescription.title},on:{"on-ok":e.updateDescriptionContent,"on-cancel":e.closeContestModal},model:{value:e.contentModal,callback:function(t){e.contentModal=t},expression:"contentModal"}},[o("MarkdownEditor",{ref:"md"})],1)],1)},F=[],J=(o("96cf"),o("1da1")),A=o("fa70"),N={name:"ProblemDescription",components:{MarkdownEditor:A["a"]},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},data:function(){return{descriptionColumns:[{key:"id",maxWidth:200},{title:"Title",slot:"title"},{title:"Public",slot:"public"},{title:"Default",slot:"default"},{title:"Votes",key:"voteNum"},{title:"Owner",key:"username"},{title:" ",slot:"edit"}],selectedDescriptions:[],descriptions:[],curDescription:{id:"",markdownDescription:""},problem:{},modalLoading:!0,addLoading:!1,contentModal:!1}},methods:{onAddDescription:function(){var e=this;this.addLoading=!0;var t=this.problem.problemCode;g["a"].createDescription({problemCode:t,title:0===this.descriptions.length?"Default":"New ".concat(this.descriptions.length),markdownDescription:""}).then(function(){var o=Object(J["a"])(regeneratorRuntime.mark((function o(n){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(0!==e.descriptions.length){o.next=13;break}return e.curDescription.id=n,e.getProblemDescriptions(t).catch((function(t){e.$Message.error(t.message)})),o.prev=3,o.next=6,e.updateDefaultDescription(!1,!1);case 6:return o.next=8,e.updateDescriptionVisibility(!1,!1);case 8:o.next=13;break;case 10:o.prev=10,o.t0=o["catch"](3),e.$Message.error(o.t0.message);case 13:e.$Message.success("Success"),e.getProblemDescriptions(t).catch((function(t){e.$Message.error(t.message)}));case 15:case"end":return o.stop()}}),o,null,[[3,10]])})));return function(e){return o.apply(this,arguments)}}(),(function(t){e.$Message.error(t.message)})).finally((function(){e.addLoading=!1}))},onDeleteDescription:function(e){var t=this;this.$Modal.confirm({title:"Confirm",content:"Delete #".concat(e.id,"-").concat(e.title,"?"),loading:!0,onOk:function(){g["a"].deleteDescription({id:e.id}).then((function(e){t.$Message.success("Deleted"),t.getProblemDescriptions(t.problem.problemCode).catch((function(e){t.$Message.error(e.message)}))})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.$Modal.remove()}))}})},onMousedown:function(e,t){this.curDescription.id=e,void 0!==t&&(this.curDescription.isPublic=1===t?0:1)},updateDescriptionContent:function(){var e=this;this.curDescription.markdownDescription=this.$refs.md.getMarkdown(),g["a"].updateDescription({id:this.curDescription.id,markdownDescription:this.curDescription.markdownDescription}).then((function(t){e.$Message.success("Success"),e.contentModal=!1,e.clear()})).catch((function(t){e.$Message.error(t.message),e.modalLoading=!1,e.$nextTick((function(){e.modalLoading=!0}))}))},updateDescriptionTitle:function(e){var t=this;e.isSelected=!e.isSelected,e.title!==e.oldTitle&&g["a"].updateDescription({id:e.id,title:e.title}).then((function(e){t.$Message.success("Success")}),(function(e){t.$Message.error(e.message)}))},updateDescriptionVisibility:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n,i){g["a"].updateDescription({id:e.curDescription.id,isPublic:e.curDescription.isPublic}).then((function(o){n(o),t&&e.$Message.success("Success")}),(function(t){i(t),o&&e.$Message.error(t.message)}))}))},updateDefaultDescription:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(n,i){if(e.problem.defaultDescriptionId!==e.curDescription.id)g["a"].updateProblemInfo({problemCode:e.problem.problemCode,defaultDescriptionId:e.curDescription.id}).then((function(o){n(o),t&&e.$Message.success("Success"),e.$nextTick((function(){e.problem.defaultDescriptionId=e.curDescription.id}))})).catch((function(t){i(t),o&&e.$Message.error(t.message)}));else{var r={message:"Must have one default description"};o&&e.$Message.error(r.message)}}))},onEditDescription:function(e){var t=this,o=this.$Message.loading({content:"Loading",duration:0});g["a"].getProblemDescription({descriptionId:e.id}).then((function(e){t.curDescription=e,t.$refs.md.setMarkdown(t.curDescription.markdownDescription),t.contentModal=!0})).catch((function(e){t.$Message.error(e.message)})).finally((function(){o()}))},getProblemDescriptions:function(e){var t=this;return new Promise((function(o,n){g["a"].getProblemDescriptionList({problemCode:e}).then((function(e){t.descriptions=e.map((function(e){return Object(h["a"])(Object(h["a"])({},e),{},{isSelected:!1})})),o(e)})).catch(n)}))},query:function(e){return this.problem=e,this.getProblemDescriptions(e.problemCode)},clear:function(){this.$refs.md.$clear()},closeContestModal:function(){this.clear(),this.contentModal=!1}}},U=N,R=(o("5518"),Object(l["a"])(U,O,F,!1,null,"38cd4a32",null)),z=R.exports,G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Form",{ref:"problem",attrs:{model:e.problem,rules:e.problemColumnRules,"label-position":"top"}},[o("Tabs",{attrs:{animated:!1},on:{"on-click":e.openTabs},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[o("TabPane",{attrs:{label:e.tabLabels.basic,name:e.tabLabels.basic}},[o("FormItem",{attrs:{label:"Title",prop:"problemTitle"}},[o("Input",{model:{value:e.problem.problemTitle,callback:function(t){e.$set(e.problem,"problemTitle",t)},expression:"problem.problemTitle"}})],1),o("FormItem",{attrs:{label:"Public",required:""}},[o("i-switch",{attrs:{"true-value":1,"false-value":0},model:{value:e.problem.isPublic,callback:function(t){e.$set(e.problem,"isPublic",t)},expression:"problem.isPublic"}})],1),o("FormItem",{attrs:{label:"Time Limit",required:""}},[o("Input",{model:{value:e.problem.timeLimit,callback:function(t){e.$set(e.problem,"timeLimit",e._n(t))},expression:"problem.timeLimit"}},[o("span",{attrs:{slot:"append"},slot:"append"},[e._v("ms")])])],1),o("FormItem",{attrs:{label:"Memory Limit",required:""}},[o("Input",{model:{value:e.problem.memoryLimit,callback:function(t){e.$set(e.problem,"memoryLimit",e._n(t))},expression:"problem.memoryLimit"}},[o("span",{attrs:{slot:"append"},slot:"append"},[e._v("KiB")])])],1),o("FormItem",{attrs:{label:"Output Limit",required:""}},[o("Input",{model:{value:e.problem.outputLimit,callback:function(t){e.$set(e.problem,"outputLimit",e._n(t))},expression:"problem.outputLimit"}},[o("span",{attrs:{slot:"append"},slot:"append"},[e._v("KiB")])])],1),o("FormItem",{attrs:{label:"Manager Groups"}},[o("Select",{attrs:{transfer:"",multiple:"",filterable:"",loading:e.groupQueryLoading,"remote-method":e.queryGroups,"default-label":(e.problem.managerGroupDTOList||[]).map((function(e){return e.groupId+": "+e.title}))},on:{"on-set-default-options":e.setGroupSet},model:{value:e.problem.managerGroups,callback:function(t){e.$set(e.problem,"managerGroups",t)},expression:"problem.managerGroups"}},e._l(e.groupSet,(function(e){return o("Option",{key:e.groupId,attrs:{value:e.groupId,label:e.groupId+": "+e.title}})})),1)],1),o("FormItem",{attrs:{label:"Source"}},[o("Input",{model:{value:e.problem.source,callback:function(t){e.$set(e.problem,"source",t)},expression:"problem.source"}})],1)],1),o("TabPane",{attrs:{label:e.tabLabels.jt,name:e.tabLabels.jt}},[o("FormItem",{attrs:{label:"Type",required:""}},[o("RadioGroup",{model:{value:e.jtType,callback:function(t){e.jtType=t},expression:"jtType"}},[o("Radio",{attrs:{label:e.JUDGE_TEMPLATE_TYPE.IO}},[e._v(e._s(e.JUDGE_TEMPLATE_PROPERTY[e.JUDGE_TEMPLATE_TYPE.IO].name))]),o("Radio",{attrs:{label:e.JUDGE_TEMPLATE_TYPE.ADVANCED}},[e._v(e._s(e.JUDGE_TEMPLATE_PROPERTY[e.JUDGE_TEMPLATE_TYPE.ADVANCED].name))])],1)],1),e.jtType===e.JUDGE_TEMPLATE_TYPE.IO?o("div",[o("FormItem",{attrs:{label:"Judge Template",required:""}},[e.problemReady?o("Select",{attrs:{transfer:"",multiple:"",filterable:"",loading:e.judgeTemplateQueryLoading},model:{value:e.ioJudgeTemplates,callback:function(t){e.ioJudgeTemplates=t},expression:"ioJudgeTemplates"}},e._l(e.judgeTemplateSet,(function(t){return o("Option",{key:t.id,attrs:{value:t.id,label:t.description}},[o("span",[e._v(e._s(t.description))]),o("span",{staticStyle:{color:"#ccc"}},[e._v(" "+e._s(t.comment))]),o("span",{staticStyle:{float:"right",color:"#ccc","margin-right":"20px"}},[e._v(e._s(t.type))])])})),1):e._e()],1),o("FormItem",{attrs:{label:"Checker",required:""}},[o("Select",{attrs:{transfer:""},model:{value:e.checker,callback:function(t){e.checker=t},expression:"checker"}},[o("Option",{attrs:{value:"custom"}},[e._v("Customized Checker")]),e._l(e.PREDEFINED_CHECKERS,(function(t){return o("Option",{key:t.name,attrs:{value:t.name}},[e._v(" "+e._s(t.name+" - "+t.description)+" ")])}))],2)],1),"custom"===e.checker?o("div",[o("FormItem",{attrs:{label:"Source Code",required:""}},[o("div",[o("CodeEditor",{ref:"CodeEditor-source",attrs:{mode:"cpp",code:e.checkerCode},on:{"update:code":function(t){e.checkerCode=t}}})],1)]),o("FormItem",{attrs:{label:"Config",required:""}},[o("div",[o("CodeEditor",{ref:"CodeEditor-config",attrs:{mode:"json",code:e.checkerConfig},on:{"update:code":function(t){e.checkerConfig=t}}})],1)])],1):e._e()],1):e.jtType===e.JUDGE_TEMPLATE_TYPE.ADVANCED?o("div",[o("JudgeTemplateTable",{ref:"JudgeTemplateTable"}),o("div",{staticClass:"footer-tools"},[o("Button",{staticClass:"float-left footer-btn",attrs:{type:"default",size:"small"},on:{click:e.createJudgeTemplate}},[e._v("Add")])],1)],1):e._e()],1),o("TabPane",{attrs:{label:e.tabLabels.ft,name:e.tabLabels.ft}},[o("FormItem",{attrs:{label:"Select one Judge Template"}},[o("Select",{staticStyle:{width:"40%","margin-right":"5px"},attrs:{transfer:"",loading:e.judgeTemplateQueryLoading},model:{value:e.selectedJT,callback:function(t){e.selectedJT=t},expression:"selectedJT"}},e._l(e.selectableJudgeTemplateSet,(function(t){return o("Option",{key:t.id,attrs:{value:t.id,label:t.description}},[o("span",[e._v(e._s(t.description))]),o("span",{staticStyle:{color:"#ccc"}},[e._v(" "+e._s(t.comment))]),o("span",{staticStyle:{float:"right",color:"#ccc","margin-right":"20px"}},[e._v(e._s(t.type))])])})),1),o("Button",{attrs:{type:"primary"},on:{click:e.addFunctionTemplate}},[e._v("Select")])],1),o("Collapse",{attrs:{accordion:""},on:{"on-change":e.openCollapse}},e._l(e.functionTemplates,(function(t){return o("Panel",{key:t.judgeTemplateId,attrs:{name:t.judgeTemplateId}},[o("span",[e._v(e._s(e.judgeTemplateSetMap[t.judgeTemplateId].description))]),o("div",{attrs:{slot:"content"},slot:"content"},[o("FormItem",[o("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.isShowFunctionTemplate,callback:function(o){e.$set(t,"isShowFunctionTemplate",o)},expression:"ft.isShowFunctionTemplate"}},[e._v("Show Function Template")])],1),o("FormItem",{attrs:{label:"Template Code"}},[o("div",{staticClass:"limit"},[o("CodeEditor",{ref:"CodeEditor-func",refInFor:!0,attrs:{mode:"text",code:t.functionTemplate},on:{"update:code":function(o){return e.$set(t,"functionTemplate",o)}}})],1)]),o("FormItem",{attrs:{label:"Initial Code"}},[o("div",{staticClass:"limit"},[o("CodeEditor",{ref:"CodeEditor-init",refInFor:!0,attrs:{mode:"text",code:t.initialTemplate},on:{"update:code":function(o){return e.$set(t,"initialTemplate",o)}}})],1)])],1)])})),1)],1)],1)],1)],1)},q=[],B=o("a95b"),W=o("3f53"),V={name:"ProblemForm",components:{CodeEditor:B["a"],JudgeTemplateTable:W["a"]},data:function(){return{problemColumnRules:{problemTitle:[{required:!0,max:96,trigger:"blur"}]},problem:{},groupSet:[],groupQueryLoading:!1,jtType:0,checker:C["k"][0].name,checkerCode:"",checkerConfig:"",ioJudgeTemplates:[],adJudgeTemplates:[],judgeTemplateSet:[],judgeTemplateSetMap:{},selectedJT:void 0,ioFunctionTemplates:[],adFunctionTemplates:[],judgeTemplateQueryLoading:!1,tabName:"basic",problemReady:!1}},computed:{JUDGE_TEMPLATE_TYPE:function(){return C["h"]},JUDGE_TEMPLATE_PROPERTY:function(){return C["g"]},PREDEFINED_CHECKERS:function(){return C["k"]},tabLabels:function(){var e={basic:"Basic",jt:"Judge Templates",ft:"Function Templates"};return e},functionTemplates:function(){return this.jtType===C["h"].IO?this.ioFunctionTemplates:this.adFunctionTemplates},selectableJudgeTemplateSet:function(){if(!this.problemReady)return[];var e=this.functionTemplates.map((function(e){return e.judgeTemplateId})),t=[];return this.judgeTemplateSet.forEach((function(o){e.includes(o.id)||t.push(o)})),t}},methods:{setProblem:function(e){var t=this;this.problem.problemCode!==e.problemCode&&(this.tabName=this.tabLabels.basic),this.problem=e,this.selectedJT="",this.queryJudgeTemplateList((function(o){t.ioJudgeTemplates=[],t.adJudgeTemplates=[],t.ioFunctionTemplates=[],t.adFunctionTemplates=[],e.judgeTemplateListDTOList&&e.judgeTemplateListDTOList.length>0&&(t.jtType=e.judgeTemplateListDTOList[0].type,t.jtType===C["h"].IO?(e.judgeTemplates.forEach((function(e){t.ioJudgeTemplates.push(e)})),e.functionTemplates.forEach((function(e){t.ioFunctionTemplates.push(e)}))):(e.judgeTemplates.forEach((function(e){t.adJudgeTemplates.push(e)})),e.functionTemplates.forEach((function(e){t.adFunctionTemplates.push(e)})))),e.checkerConfig&&(null===e.checkerConfig.spj?(t.checker=e.checkerConfig.source,t.checkerCode="",t.checkerConfig=""):(t.checker="custom",t.checkerCode=e.checkerConfig.source,t.checkerConfig=JSON.stringify(JSON.parse(e.checkerConfig.spj),null,2))),t.problemReady=!0}))},queryJudgeTemplateList:function(e){var t=this;this.judgeTemplateQueryLoading=!0,g["a"].getJudgeTemplateList({type:this.jtType,problemCode:this.problem.problemCode}).then((function(o){t.judgeTemplateQueryLoading=!1,t.judgeTemplateSet=[],o.forEach((function(e){var o={id:e.id,title:e.title,description:"".concat(e.id,": ").concat(e.title),comment:e.comment,type:C["g"][e.type].name};t.judgeTemplateSet.push(o),t.$set(t.judgeTemplateSetMap,e.id,o)})),e&&e(o),t.jtType===C["h"].IO||(o.forEach((function(e){t.adJudgeTemplates.includes(e.id)&&(e._checked=!0)})),t.$nextTick((function(){t.$refs.JudgeTemplateTable.setJudgeTemplates(o)})))})).catch((function(e){t.$Message.error(e.message)}))},queryGroups:function(e){var t=this;""!==e?(this.groupQueryLoading=!0,g["a"].queryGroupTitle({title:e}).then((function(e){t.groupSet=e,t.groupQueryLoading=!1})).catch((function(e){t.$Message.error(e.message)}))):this.groupSet=[]},setGroupSet:function(){this.groupSet=this.problem.managerGroupDTOList},save:function(e){var t=this;return new Promise((function(o,n){t.$refs.problem.validate((function(i){if(i){var r={problemCode:t.problem.problemCode,isPublic:t.problem.isPublic,problemTitle:t.problem.problemTitle,source:t.problem.source,judgeTemplates:t.jtType===C["h"].IO?t.ioJudgeTemplates:t.adJudgeTemplates,managerGroups:t.problem.managerGroups,memoryLimit:parseInt(t.problem.memoryLimit),outputLimit:parseInt(t.problem.outputLimit),timeLimit:parseInt(t.problem.timeLimit),functionTemplates:t.functionTemplates};t.jtType===C["h"].IO&&("custom"===t.checker?r.checkerConfig={source:t.checkerCode,spj:t.checkerConfig}:r.checkerConfig={source:t.checker,spj:null}),g["a"][e](r).then(o).catch(n)}else n({message:"Invalid Form"})}))}))},createJudgeTemplate:function(){this.$refs.JudgeTemplateTable.createJudgeTemplate(C["h"].ADVANCED,this.problem.problemCode)},addFunctionTemplate:function(){this.selectedJT&&(this.functionTemplates.push({judgeTemplateId:this.selectedJT,isShowFunctionTemplate:1,functionTemplate:"",initialTemplate:""}),this.selectedJT=void 0)},refreshAllEditors:function(){var e="CodeEditor-func",t="CodeEditor-init";this.$refs[e]&&this.$refs[e].forEach((function(e){e&&e.refresh()})),this.$refs[t]&&this.$refs[t].forEach((function(e){e&&e.refresh()})),this.$refs["CodeEditor-source"]&&this.$refs["CodeEditor-source"].refresh(),this.$refs["CodeEditor-config"]&&this.$refs["CodeEditor-config"].refresh()},openCollapse:function(){this.refreshAllEditors()},openTabs:function(e){switch(e){case this.tabLabels.basic:break;case this.tabLabels.jt:this.refreshAllEditors();break;case this.tabLabels.ft:this.refreshAllEditors();break}}},watch:{jtType:function(e){var t=this;switch(e){case C["h"].IO:this.problemReady=!1,this.queryJudgeTemplateList((function(){t.problemReady=!0}));break;case C["h"].ADVANCED:this.queryJudgeTemplateList((function(){t.$refs.JudgeTemplateTable.on("after-update",t.queryJudgeTemplateList),t.$refs.JudgeTemplateTable.on("on-selection",(function(e){t.adJudgeTemplates=e.map((function(e){return e.id}))})),t.$refs.JudgeTemplateTable.setColumns(["Selection","#","Title","Comment","Actions"])}));break;default:break}}}},Q=V,Y=(o("2013"),Object(l["a"])(Q,G,q,!1,null,"1cc22704",null)),K=Y.exports,X=o("e325"),H={name:"ProblemView",components:{ProblemCode:d,ProblemCheckpoint:j,ProblemDescription:z,ProblemForm:K},mixins:[X["b"]],data:function(){return{problemColumns:[{title:"Id",key:"problemId",maxWidth:80},{key:"problemCode",maxWidth:130,slot:"code"},{title:"Title",slot:"title"},{title:"Time Limit",key:"timeLimit",sortable:"custom",slot:"time"},{title:"Memory Limit",key:"memoryLimit",sortable:"custom",slot:"mem"},{title:"AC Ratio",sortable:"custom",slot:"ratio"},{title:"Source",key:"source"},{title:"Owner",key:"username"},{title:"\b",slot:"edit",minWidth:150}],problems:[],problemCode:"",problemTitle:"",tableLoading:!1,formModalLoading:!0,uploadModalLoading:!0,formModal:!1,checkpointModel:!1,descriptionModel:!1,isAddProblem:!1}},methods:{getProblemList:function(){var e=this;this.tableLoading=!0,g["a"].getProblemList({pageNow:this.pageNow,pageSize:this.pageSize,sortBy:this.sortBy,ascending:this.ascending}).then((function(t){e.problems=t.rows,e.total=parseInt(t.totalPage)*e.pageSize})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.tableLoading=!1}))},handleUpdateProblem:function(){var e=this;this.$refs.ProblemForm.save(this.isAddProblem?"createProblem":"updateProblemInfo").then((function(t){e.getProblemList(),e.$Message.success("Success"),e.formModal=!1})).catch((function(t){e.$Message.error(t.message),e.formModalLoading=!1,e.$nextTick((function(){e.formModalLoading=!0}))}))},addProblem:function(){this.problemCode="",this.problemTitle="",this.isAddProblem=!0,this.$refs.ProblemForm.setProblem({problemCode:"",problemTitle:"",isPublic:1,tagDTOList:[],judgeTemplateListDTOList:[],judgeTemplates:[],timeLimit:1e3,memoryLimit:262144,outputLimit:102400,source:"",managerGroupDTOList:[],managerGroups:[]}),this.formModal=!0},onEditProblem:function(e,t){var o=this,n=this.$Message.loading({content:"Loading",duration:0});g["a"].getProblem({problemCode:e.problemCode}).then((function(n){o.problemCode=e.problemCode,o.problemTitle=e.problemTitle,o.$refs.ProblemForm.setProblem(Object.assign(n,e)),o.isAddProblem=t,o.formModal=!0})).catch((function(e){o.$Message.error(e.message)})).finally((function(){n()}))},showProblemDescriptions:function(e){var t=this,o=this.$Message.loading({content:"Loading",duration:0});this.$refs.ProblemDescription.query(e).then((function(){t.problemCode=e.problemCode,t.problemTitle=e.problemTitle,t.descriptionModel=!0})).catch((function(e){t.$Message.error(e.message)})).finally((function(){o()}))},showProblemCheckpoints:function(e){var t=this,o=this.$Message.loading({content:"Loading",duration:0});this.$refs.ProblemCheckpoint.query(e.problemCode).then((function(){t.problemCode=e.problemCode,t.problemTitle=e.problemTitle,t.checkpointModel=!0})).catch((function(e){t.$Message.error(e.message)})).finally((function(){o()}))},saveCheckpoints:function(){var e=this;this.$refs.ProblemCheckpoint.save((function(){e.checkpointModel=!1}),(function(){e.uploadModalLoading=!1,e.$nextTick((function(){e.uploadModalLoading=!0}))}))},tagsManagement:function(){}},mounted:function(){this.getProblemList()},watch:{$route:function(){this.getProblemList()}}},Z=H,ee=Object(l["a"])(Z,n,i,!1,null,"6e78f842",null);t["default"]=ee.exports},"5d52":function(e,t,o){},6566:function(e,t,o){"use strict";var n=o("9bf2").f,i=o("7c73"),r=o("e2cc"),a=o("0366"),s=o("19aa"),c=o("2266"),l=o("7dd0"),u=o("2626"),d=o("83ab"),p=o("f183").fastKey,m=o("69f3"),f=m.set,h=m.getterFor;e.exports={getConstructor:function(e,t,o,l){var u=e((function(e,n){s(e,u,t),f(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&c(n,e[l],e,o)})),m=h(t),b=function(e,t,o){var n,i,r=m(e),a=v(e,t);return a?a.value=o:(r.last=a={index:i=p(t,!0),key:t,value:o,previous:n=r.last,next:void 0,removed:!1},r.first||(r.first=a),n&&(n.next=a),d?r.size++:e.size++,"F"!==i&&(r.index[i]=a)),e},v=function(e,t){var o,n=m(e),i=p(t);if("F"!==i)return n.index[i];for(o=n.first;o;o=o.next)if(o.key==t)return o};return r(u.prototype,{clear:function(){var e=this,t=m(e),o=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete o[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,o=m(t),n=v(t,e);if(n){var i=n.next,r=n.previous;delete o.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),o.first==n&&(o.first=i),o.last==n&&(o.last=r),d?o.size--:t.size--}return!!n},forEach:function(e){var t,o=m(this),n=a(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:o.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!v(this,e)}}),r(u.prototype,o?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return b(this,0===e?0:e,t)}}:{add:function(e){return b(this,e=0===e?0:e,e)}}),d&&n(u.prototype,"size",{get:function(){return m(this).size}}),u},setStrong:function(e,t,o){var n=t+" Iterator",i=h(t),r=h(n);l(e,t,(function(e,t){f(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,o=e.last;while(o&&o.removed)o=o.previous;return e.target&&(e.last=o=o?o.next:e.state.first)?"keys"==t?{value:o.key,done:!1}:"values"==t?{value:o.value,done:!1}:{value:[o.key,o.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),o?"entries":"values",!o,!0),u(t)}}},"6d61":function(e,t,o){"use strict";var n=o("23e7"),i=o("da84"),r=o("94ca"),a=o("6eeb"),s=o("f183"),c=o("2266"),l=o("19aa"),u=o("861d"),d=o("d039"),p=o("1c7e"),m=o("d44e"),f=o("7156");e.exports=function(e,t,o){var h=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),v=h?"set":"add",g=i[e],k=g&&g.prototype,C=g,y={},T=function(e){var t=k[e];a(k,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:function(e,o){return t.call(this,0===e?0:e,o),this})};if(r(e,"function"!=typeof g||!(b||k.forEach&&!d((function(){(new g).entries().next()})))))C=o.getConstructor(t,e,h,v),s.REQUIRED=!0;else if(r(e,!0)){var w=new C,M=w[v](b?{}:-0,1)!=w,_=d((function(){w.has(1)})),I=p((function(e){new g(e)})),S=!b&&d((function(){var e=new g,t=5;while(t--)e[v](t,t);return!e.has(-0)}));I||(C=t((function(t,o){l(t,C,e);var n=f(new g,t,C);return void 0!=o&&c(o,n[v],n,h),n})),C.prototype=k,k.constructor=C),(_||S)&&(T("delete"),T("has"),h&&T("get")),(S||M)&&T(v),b&&k.clear&&delete k.clear}return y[e]=C,n({global:!0,forced:C!=g},y),m(C,e),b||o.setStrong(C,e,h),C}},"71b7":function(e,t,o){},"80c2":function(e,t,o){},"8a79":function(e,t,o){"use strict";var n=o("23e7"),i=o("06cf").f,r=o("50c4"),a=o("5a34"),s=o("1d80"),c=o("ab13"),l=o("c430"),u="".endsWith,d=Math.min,p=c("endsWith"),m=!l&&!p&&!!function(){var e=i(String.prototype,"endsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!m&&!p},{endsWith:function(e){var t=String(s(this));a(e);var o=arguments.length>1?arguments[1]:void 0,n=r(t.length),i=void 0===o?n:d(r(o),n),c=String(e);return u?u.call(t,c,i):t.slice(i-c.length,i)===c}})},a630:function(e,t,o){var n=o("23e7"),i=o("4df4"),r=o("1c7e"),a=!r((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:a},{from:i})},bb2f:function(e,t,o){var n=o("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},cd6c:function(e,t,o){"use strict";var n=o("d6ba"),i=o.n(n);i.a},d28b:function(e,t,o){var n=o("746f");n("iterator")},d6ba:function(e,t,o){},dcbf:function(e,t,o){"use strict";var n=o("80c2"),i=o.n(n);i.a},e01a:function(e,t,o){"use strict";var n=o("23e7"),i=o("83ab"),r=o("da84"),a=o("5135"),s=o("861d"),c=o("9bf2").f,l=o("e893"),u=r.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};l(p,u);var m=p.prototype=u.prototype;m.constructor=p;var f=m.toString,h="Symbol(test)"==String(u("test")),b=/^Symbol\((.*)\)[^)]+$/;c(m,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=f.call(e);if(a(d,e))return"";var o=h?t.slice(7,-1):t.replace(b,"$1");return""===o?void 0:o}}),n({global:!0,forced:!0},{Symbol:p})}},e03e:function(e,t,o){},f183:function(e,t,o){var n=o("d012"),i=o("861d"),r=o("5135"),a=o("9bf2").f,s=o("90e3"),c=o("bb2f"),l=s("meta"),u=0,d=Object.isExtensible||function(){return!0},p=function(e){a(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},m=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,l)){if(!d(e))return"F";if(!t)return"E";p(e)}return e[l].objectID},f=function(e,t){if(!r(e,l)){if(!d(e))return!0;if(!t)return!1;p(e)}return e[l].weakData},h=function(e){return c&&b.REQUIRED&&d(e)&&!r(e,l)&&p(e),e},b=e.exports={REQUIRED:!1,fastKey:m,getWeakData:f,onFreeze:h};n[l]=!0}}]);
//# sourceMappingURL=chunk-42e74b8b.be372043.js.map